# 32. Статическая и динамическая маршрутизация, OSPF 

## Задание

[Методичка](https://docs.google.com/document/d/1c3p-2PQl-73G8uKJaqmyCaw_CtRQipAt/edit?usp=share_link&ouid=104106368295333385634&rtpof=true&sd=true)

1. Развернуть 3 виртуальные машины
2. Объединить их разными vlan
- настроить OSPF между машинами на базе Quagga;
- изобразить ассиметричный роутинг;
- сделать один из линков "дорогим", но что бы при этом роутинг был симметричным.

## Script

```bash
scriptreplay --timing=timing.log --divisor=5 script.log
```

## Практика

### Настройка OSPF

Проверка динамической маршрутизации выполняется с использованием ping в направлении следующих сетей:
192.168.10.0/24
192.168.20.0/24
192.168.30.0/24
10.0.10.0/30 
10.0.11.0/30
10.0.13.0/30

### Ассиметричый роутинг

Конфигурация ассимитричной маршрутизации выполняется параметром `ip ospf cost 1000` (файл /etc/frr/frr.conf) на *router1* в направлении *router2*.

Проверка осуществляется командой `ping` с *router1* в направлении сети 192.168.20.0/24 и прослушиванием линков на *router2* с использованием `tcpdump`. Входящие ICMP пакеты будут приходить со стороны *router3*, т.к. это направлении "дешевле" для *router1*. При этом ответные сообщения будут идти в интерфейс в направлении *router1*.

### Симметричный роутинг

Конфигурация симметричной маршрутизации выполняется параметром `ip ospf cost 1000`  (файл /etc/frr/frr.conf) на *router2* в направлении *router1*.

Прослушивание портов на *router2* показывает, что входящие и исходящие покаеты идут с менее "дорого" направления *router3* 

